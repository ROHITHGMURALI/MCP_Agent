{
"$schema": "https://json-schema.org/draft/2020-12/schema",
"$id": "https://example.com/schemas/ir.schema.json",
"type": "object",
"required": ["service", "types", "operations"],
"properties": {
"meta": {
"type": "object",
"properties": {
"irVersion": {"type": "string"},
"specDigest": {"type": "string", "pattern": "^[a-f0-9]{64}$"},
"source": {"type": "string"},
"generatedAt": {"type": "string", "format": "date-time"}
},
"additionalProperties": false
},
"service": {
"type": "object",
"required": ["id", "title", "version"],
"properties": {
"id": {"type": "string"},
"title": {"type": "string"},
"description": {"type": "string"},
"version": {"type": "string"},
"baseUrls": {"type": "array", "items": {"type": "string", "format": "uri"}},
"tags": {"type": "array", "items": {"type": "string"}},
"contact": {"type": "object"},
"license": {"type": "object"},
"externalDocs": {"type": "string", "format": "uri"}
},
"additionalProperties": false
},
"securitySchemes": {
"type": "array",
"items": {"$ref": "#/definitions/SecurityScheme"}
},
"types": {
"type": "array",
"items": {"$ref": "#/definitions/Type"}
},
"operations": {
"type": "array",
"items": {"$ref": "#/definitions/Operation"}
},
"webhooks": {"type": "array", "items": {"$ref": "#/definitions/Webhook"}},
"rateLimits": {"type": "array", "items": {"$ref": "#/definitions/RateLimit"}},
"servers": {"type": "array", "items": {"$ref": "#/definitions/Server"}}
},
"definitions": {
"Server": {
"type": "object",
"required": ["url"],
"properties": {"url": {"type": "string"}, "variables": {"type": "object"}}
},
"SecurityScheme": {
"type": "object",
"required": ["type", "name"],
"properties": {
"id": {"type": "string"},
"type": {"enum": ["apiKey", "http", "oauth2", "openIdConnect", "custom"]},
"name": {"type": "string"},
"in": {"enum": ["header", "query", "cookie"]},
"scheme": {"type": "string"},
"flows": {"type": "array", "items": {"$ref": "#/definitions/OAuthFlow"}},
"headerName": {"type": "string"},
"x": {"type": "object"}
}
},
"OAuthFlow": {
"type": "object",
"required": ["type"],
"properties": {
"type": {"enum": ["clientCredentials", "authorizationCode", "deviceCode", "implicit"]},
"tokenUrl": {"type": "string"},
"authUrl": {"type": "string"},
"refreshUrl": {"type": "string"},
"scopes": {"type": "array", "items": {"type": "string"}}
}
},
"Type": {
"type": "object",
"required": ["id", "kind"],
"properties": {
"id": {"type": "string"},
"name": {"type": "string"},
"kind": {"enum": [
"object", "array", "string", "number", "integer", "boolean", "null", "union", "intersection", "enum", "map", "ref"
]},
"description": {"type": "string"},
"properties": {"type": "object", "additionalProperties": {"$ref": "#/definitions/TypeRef"}},
"required": {"type": "array", "items": {"type": "string"}},
"items": {"$ref": "#/definitions/TypeRef"},
"enum": {"type": "array", "items": {"type": ["string", "number"]}},
"discriminator": {"type": "string"},
"oneOf": {"type": "array", "items": {"$ref": "#/definitions/TypeRef"}},
"allOf": {"type": "array", "items": {"$ref": "#/definitions/TypeRef"}},
"anyOf": {"type": "array", "items": {"$ref": "#/definitions/TypeRef"}},
"mapKeys": {"$ref": "#/definitions/TypeRef"},
"mapValues": {"$ref": "#/definitions/TypeRef"},
"format": {"type": "string"},
"nullable": {"type": "boolean"},
"default": {},
"examples": {"type": "array"},
"constraints": {"$ref": "#/definitions/Constraints"},
"x": {"type": "object"}
},
"additionalProperties": false
},
"TypeRef": {
"type": "object",
"required": ["typeId"],
"properties": {"typeId": {"type": "string"}, "nullable": {"type": "boolean"}}
},
"Constraints": {
"type": "object",
"properties": {
"minLength": {"type": "integer", "minimum": 0},
"maxLength": {"type": "integer", "minimum": 0},
"minimum": {"type": "number"},
"maximum": {"type": "number"},
"exclusiveMinimum": {"type": "boolean"},
"exclusiveMaximum": {"type": "boolean"},
"pattern": {"type": "string"}
}
},
"Operation": {
"type": "object",
"required": ["id", "name", "transport"],
"properties": {
"id": {"type": "string"},
"name": {"type": "string"},
"summary": {"type": "string"},
"description": {"type": "string"},
"transport": {"enum": ["http", "graphql", "grpc", "custom"]},
"method": {"enum": ["GET", "POST", "PUT", "PATCH", "DELETE", "OPTIONS", "HEAD"]},
"pathTemplate": {"type": "string"},
"tags": {"type": "array", "items": {"type": "string"}},
"inputs": {"$ref": "#/definitions/Inputs"},
"outputs": {"$ref": "#/definitions/Outputs"},
"auth": {"$ref": "#/definitions/OperationAuth"},
"semantics": {"$ref": "#/definitions/Semantics"},
"x": {"type": "object"}
}
},
"Inputs": {
"type": "object",
"properties": {
"pathParams": {"type": "object", "additionalProperties": {"$ref": "#/definitions/TypeRef"}},
"queryParams": {"type": "object", "additionalProperties": {"$ref": "#/definitions/TypeRef"}},
"headers": {"type": "object", "additionalProperties": {"$ref": "#/definitions/TypeRef"}},
"cookies": {"type": "object", "additionalProperties": {"$ref": "#/definitions/TypeRef"}},
"body": {"$ref": "#/definitions/Body"},
"required": {"type": "array", "items": {"type": "string"}}
}
},
"Body": {
"type": "object",
"properties": {
"contentTypes": {"type": "array", "items": {"type": "string"}},
"schema": {"$ref": "#/definitions/TypeRef"}
}
},
"Outputs": {
"type": "object",
"properties": {
"success": {"type": "array", "items": {"$ref": "#/definitions/Response"}},
"errors": {"type": "array", "items": {"$ref": "#/definitions/Response"}},
"default": {"$ref": "#/definitions/Response"}
}
},
"Response": {
"type": "object",
"properties": {
"status": {"type": "integer"},
"contentTypes": {"type": "array", "items": {"type": "string"}},
"schema": {"$ref": "#/definitions/TypeRef"}
}
},
"Semantics": {
"type": "object",
"properties": {
"idempotent": {"type": "boolean"},
"safe": {"type": "boolean"},
"paginated": {"$ref": "#/definitions/Pagination"},
"streaming": {"$ref": "#/definitions/Streaming"},
"rateCost": {"type": "number"}
}
},
"Pagination": {
"type": "object",
"properties": {
"mode": {"enum": ["offset", "cursor", "link", "tokenInBody", "opaque"]},
"request": {"type": "object"},
"response": {"type": "object"}
}
},
"Streaming": {
"type": "object",
"properties": {
"protocol": {"enum": ["sse", "websocket", "grpc"]},
"resumeTokenPath": {"type": "string"}
}
},
"OperationAuth": {
"type": "object",
"properties": {
"applies": {"type": "array", "items": {"type": "string"}},
"optional": {"type": "boolean"}
}
},
"Webhook": {"type": "object"},
"RateLimit": {"type": "object"}
}
}
